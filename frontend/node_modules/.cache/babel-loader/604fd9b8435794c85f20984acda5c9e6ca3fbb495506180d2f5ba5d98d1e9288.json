{"ast":null,"code":"var _jsxFileName = \"/Users/dhairyasansi/Documents/florisherbals-final/frontend/src/Checkout.js\",\n  _s = $RefreshSig$();\nimport { useCart } from \"./context/CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Checkout() {\n  _s();\n  const {\n    cart,\n    totalAmount\n  } = useCart();\n  const payNow = async () => {\n    const res = await fetch(\"http://localhost:5001/api/payment/create-order\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        amount: totalAmount,\n        products: cart\n      })\n    });\n    const data = await res.json();\n    const options = {\n      key: \"RAZORPAY_KEY_ID\",\n      // replace later with env\n      amount: totalAmount * 100,\n      currency: \"INR\",\n      name: \"Floris Herbals\",\n      description: \"Organic Oils Purchase\",\n      order_id: data.order.id,\n      handler: async function (response) {\n        await fetch(\"http://localhost:5001/api/payment/verify\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            ...response,\n            products: cart,\n            amount: totalAmount\n          })\n        });\n        alert(\"Payment successful ðŸŒ¿\");\n        localStorage.clear();\n        window.location.href = \"/\";\n      }\n    };\n    new window.Razorpay(options).open();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 40\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), cart.map((p, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [p.name, \" \\u2014 \\u20B9\", p.price]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Total: \\u20B9\", totalAmount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: payNow,\n      children: \"Pay with Razorpay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n      src: \"https://checkout.razorpay.com/v1/checkout.js\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"Gel0AToaF+3dnW2WIj2NLfdax0Q=\", false, function () {\n  return [useCart];\n});\n_c = Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useCart","jsxDEV","_jsxDEV","Checkout","_s","cart","totalAmount","payNow","res","fetch","method","headers","body","JSON","stringify","amount","products","data","json","options","key","currency","name","description","order_id","order","id","handler","response","alert","localStorage","clear","window","location","href","Razorpay","open","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","map","p","i","price","onClick","src","_c","$RefreshReg$"],"sources":["/Users/dhairyasansi/Documents/florisherbals-final/frontend/src/Checkout.js"],"sourcesContent":["import { useCart } from \"./context/CartContext\";\n\nexport default function Checkout() {\n  const { cart, totalAmount } = useCart();\n\n  const payNow = async () => {\n    const res = await fetch(\"http://localhost:5001/api/payment/create-order\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ amount: totalAmount, products: cart })\n    });\n\n    const data = await res.json();\n\n    const options = {\n      key: \"RAZORPAY_KEY_ID\", // replace later with env\n      amount: totalAmount * 100,\n      currency: \"INR\",\n      name: \"Floris Herbals\",\n      description: \"Organic Oils Purchase\",\n      order_id: data.order.id,\n      handler: async function (response) {\n        await fetch(\"http://localhost:5001/api/payment/verify\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            ...response,\n            products: cart,\n            amount: totalAmount\n          })\n        });\n        alert(\"Payment successful ðŸŒ¿\");\n        localStorage.clear();\n        window.location.href = \"/\";\n      }\n    };\n\n    new window.Razorpay(options).open();\n  };\n\n  return (\n    <div style={{ padding: 40 }}>\n      <h2>Checkout</h2>\n\n      {cart.map((p, i) => (\n        <p key={i}>{p.name} â€” â‚¹{p.price}</p>\n      ))}\n\n      <h3>Total: â‚¹{totalAmount}</h3>\n      <button onClick={payNow}>Pay with Razorpay</button>\n\n      <script src=\"https://checkout.razorpay.com/v1/checkout.js\"></script>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}