{"ast":null,"code":"var _jsxFileName = \"/Users/dhairyasansi/Documents/florisherbals-final/frontend/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\"); // Handle errors visually\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\"); // Clear previous errors\n\n    try {\n      const res = await fetch(\"http://localhost:5001/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n\n      // SAFETY CHECK: Ensure we actually got JSON back\n      const contentType = res.headers.get(\"content-type\");\n      if (!contentType || !contentType.includes(\"application/json\")) {\n        throw new Error(\"Backend is not running or returned HTML error page.\");\n      }\n      const data = await res.json();\n      if (res.ok) {\n        login(data);\n        if (data.isAdmin) navigate(\"/admin\");else navigate(\"/account\");\n      } else {\n        setError(data.error || \"Invalid login credentials\");\n      }\n    } catch (err) {\n      console.error(err);\n      setError(\"Cannot connect to server. Is the backend running?\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"100px 20px\",\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontFamily: \"Playfair Display, serif\",\n        marginBottom: 30\n      },\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\",\n        background: \"#fee\",\n        padding: 10,\n        borderRadius: 5,\n        maxWidth: 300,\n        margin: \"0 auto 20px\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        maxWidth: 300,\n        margin: \"auto\",\n        gap: 15\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        style: {\n          padding: 12,\n          border: \"1px solid #ddd\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        style: {\n          padding: 12,\n          border: \"1px solid #ddd\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        style: {\n          marginTop: 10\n        },\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: 20\n      },\n      children: [\"New here? \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/register\",\n        style: {\n          textDecoration: \"underline\"\n        },\n        children: \"Create an account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 46\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"/PXqgOY0NclNtUA6JnwG+wOsTJs=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useAuth","useNavigate","Link","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","error","setError","login","navigate","handleSubmit","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","contentType","get","includes","Error","data","json","ok","isAdmin","err","console","style","padding","textAlign","children","fontFamily","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","background","borderRadius","maxWidth","margin","onSubmit","display","flexDirection","gap","placeholder","value","onChange","target","border","type","className","marginTop","to","textDecoration","_c","$RefreshReg$"],"sources":["/Users/dhairyasansi/Documents/florisherbals-final/frontend/src/pages/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useNavigate, Link } from \"react-router-dom\";\n\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\"); // Handle errors visually\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\"); // Clear previous errors\n    \n    try {\n      const res = await fetch(\"http://localhost:5001/api/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password })\n      });\n\n      // SAFETY CHECK: Ensure we actually got JSON back\n      const contentType = res.headers.get(\"content-type\");\n      if (!contentType || !contentType.includes(\"application/json\")) {\n        throw new Error(\"Backend is not running or returned HTML error page.\");\n      }\n\n      const data = await res.json();\n      \n      if (res.ok) {\n        login(data);\n        if (data.isAdmin) navigate(\"/admin\");\n        else navigate(\"/account\");\n      } else {\n        setError(data.error || \"Invalid login credentials\");\n      }\n    } catch (err) {\n      console.error(err);\n      setError(\"Cannot connect to server. Is the backend running?\");\n    }\n  };\n\n  return (\n    <div style={{ padding: \"100px 20px\", textAlign: \"center\" }}>\n      <h2 style={{ fontFamily: \"Playfair Display, serif\", marginBottom: 30 }}>Sign In</h2>\n      \n      {error && <p style={{ color: \"red\", background: \"#fee\", padding: 10, borderRadius: 5, maxWidth: 300, margin: \"0 auto 20px\" }}>{error}</p>}\n      \n      <form onSubmit={handleSubmit} style={{ display: \"flex\", flexDirection: \"column\", maxWidth: 300, margin: \"auto\", gap: 15 }}>\n        <input\n          placeholder=\"Email\"\n          value={email}\n          onChange={e => setEmail(e.target.value)}\n          style={{ padding: 12, border: \"1px solid #ddd\" }}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          style={{ padding: 12, border: \"1px solid #ddd\" }}\n        />\n        <button className=\"btn-primary\" style={{ marginTop: 10 }}>Login</button>\n      </form>\n      <p style={{ marginTop: 20 }}>New here? <Link to=\"/register\" style={{ textDecoration: \"underline\" }}>Create an account</Link></p>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}